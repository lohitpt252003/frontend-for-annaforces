{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import Header from'./components/Header';import Login from'./components/Login';import WelcomePage from'./components/WelcomePage';import Problems from'./components/Problems';import ProblemDetail from'./components/ProblemDetail';import Profile from'./components/Profile';import UserSubmissions from'./components/UserSubmissions';import SubmissionDetail from'./components/SubmissionDetail';import CodeSubmission from'./components/CodeSubmission';import ProblemSubmissions from'./components/ProblemSubmissions';import ProtectedRoute from'./components/ProtectedRoute';import Credits from'./components/Credits';import Footer from'./components/Footer';import AboutUs from'./components/AboutUs';import Contact from'./components/Contact';import PrivacyPolicy from'./components/PrivacyPolicy';import NotFound from'./components/NotFound';import LoadingSpinner from'./components/LoadingSpinner';// Import LoadingSpinner\nimport themeData from'./assets/theme.json';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isLoggedIn,setIsLoggedIn]=useState(!!localStorage.getItem('token'));const[userName,setUserName]=useState('');const[userId,setUserId]=useState('');const[token,setToken]=useState('');const[isLoading,setIsLoading]=useState(false);// New state for global loading\nconst[theme,setTheme]=useState(()=>{const storedTheme=localStorage.getItem('theme');if(storedTheme){return storedTheme;}return window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light';});useEffect(()=>{document.body.className=theme+'-theme';localStorage.setItem('theme',theme);},[theme]);useEffect(()=>{const storedUserId=localStorage.getItem('user_id');const storedUserName=localStorage.getItem('username');const storedToken=localStorage.getItem('token');if(storedUserId&&storedUserName&&storedToken){setUserId(storedUserId);setUserName(storedUserName);setToken(storedToken);setIsLoggedIn(true);}},[]);const handleLoginSuccess=(newUserId,newUserName,newName,newToken)=>{setUserId(newUserId);setUserName(newUserName);setToken(newToken);setIsLoggedIn(true);};const handleLogout=()=>{localStorage.clear();setIsLoggedIn(false);setUserName('');setUserId('');setToken('');};const toggleTheme=()=>{setTheme(prevTheme=>prevTheme==='light'?'dark':'light');};const setGlobalLoading=loading=>{// Function to set global loading state\nsetIsLoading(loading);};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{isLoggedIn:isLoggedIn,userName:userName,onLogout:handleLogout,toggleTheme:toggleTheme,currentTheme:theme}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{onLogin:handleLoginSuccess,setGlobalLoading:setGlobalLoading})}),/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(ProtectedRoute,{isLoggedIn:isLoggedIn}),children:[/*#__PURE__*/_jsx(Route,{path:\"/welcome\",element:/*#__PURE__*/_jsx(WelcomePage,{userName:userName})}),/*#__PURE__*/_jsx(Route,{path:\"/problems\",element:/*#__PURE__*/_jsx(Problems,{userId:userId,token:token,setGlobalLoading:setGlobalLoading})}),/*#__PURE__*/_jsx(Route,{path:\"/problems/:problem_id\",element:/*#__PURE__*/_jsx(ProblemDetail,{userId:userId,token:token,setGlobalLoading:setGlobalLoading})}),/*#__PURE__*/_jsx(Route,{path:\"/problems/:problemId/submit\",element:/*#__PURE__*/_jsx(CodeSubmission,{token:token,setGlobalLoading:setGlobalLoading})}),/*#__PURE__*/_jsx(Route,{path:\"/problems/:problemId/submissions\",element:/*#__PURE__*/_jsx(ProblemSubmissions,{token:token,setGlobalLoading:setGlobalLoading})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{userId:userId,token:token,setGlobalLoading:setGlobalLoading})}),/*#__PURE__*/_jsx(Route,{path:\"/users/:userId/submissions\",element:/*#__PURE__*/_jsx(UserSubmissions,{token:token,setGlobalLoading:setGlobalLoading})}),/*#__PURE__*/_jsx(Route,{path:\"/submissions/:submissionId\",element:/*#__PURE__*/_jsx(SubmissionDetail,{token:token,setGlobalLoading:setGlobalLoading})}),/*#__PURE__*/_jsx(Route,{path:\"/credits\",element:/*#__PURE__*/_jsx(Credits,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"/about\",element:/*#__PURE__*/_jsx(AboutUs,{})}),/*#__PURE__*/_jsx(Route,{path:\"/contact\",element:/*#__PURE__*/_jsx(Contact,{})}),/*#__PURE__*/_jsx(Route,{path:\"/privacy\",element:/*#__PURE__*/_jsx(PrivacyPolicy,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:isLoggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/welcome\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(LoadingSpinner,{loading:isLoading}),\" \"]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Header","Login","WelcomePage","Problems","ProblemDetail","Profile","UserSubmissions","SubmissionDetail","CodeSubmission","ProblemSubmissions","ProtectedRoute","Credits","Footer","AboutUs","Contact","PrivacyPolicy","NotFound","LoadingSpinner","themeData","jsx","_jsx","jsxs","_jsxs","App","isLoggedIn","setIsLoggedIn","localStorage","getItem","userName","setUserName","userId","setUserId","token","setToken","isLoading","setIsLoading","theme","setTheme","storedTheme","window","matchMedia","matches","document","body","className","setItem","storedUserId","storedUserName","storedToken","handleLoginSuccess","newUserId","newUserName","newName","newToken","handleLogout","clear","toggleTheme","prevTheme","setGlobalLoading","loading","children","onLogout","currentTheme","path","element","onLogin","to"],"sources":["E:/NEW/frontend-for-annaforces/app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport Header from './components/Header';\nimport Login from './components/Login';\nimport WelcomePage from './components/WelcomePage';\nimport Problems from './components/Problems';\nimport ProblemDetail from './components/ProblemDetail';\nimport Profile from './components/Profile';\nimport UserSubmissions from './components/UserSubmissions';\nimport SubmissionDetail from './components/SubmissionDetail';\nimport CodeSubmission from './components/CodeSubmission';\nimport ProblemSubmissions from './components/ProblemSubmissions';\nimport ProtectedRoute from './components/ProtectedRoute';\nimport Credits from './components/Credits';\nimport Footer from './components/Footer';\nimport AboutUs from './components/AboutUs';\nimport Contact from './components/Contact';\nimport PrivacyPolicy from './components/PrivacyPolicy';\nimport NotFound from './components/NotFound';\nimport LoadingSpinner from './components/LoadingSpinner'; // Import LoadingSpinner\nimport themeData from './assets/theme.json';\n\nfunction App() {\n  const [isLoggedIn, setIsLoggedIn] = useState(!!localStorage.getItem('token'));\n  const [userName, setUserName] = useState('');\n  const [userId, setUserId] = useState('');\n  const [token, setToken] = useState('');\n  const [isLoading, setIsLoading] = useState(false); // New state for global loading\n  const [theme, setTheme] = useState(() => {\n    const storedTheme = localStorage.getItem('theme');\n    if (storedTheme) {\n      return storedTheme;\n    }\n    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n  });\n\n  useEffect(() => {\n    document.body.className = theme + '-theme';\n    localStorage.setItem('theme', theme);\n  }, [theme]);\n\n  useEffect(() => {\n    const storedUserId = localStorage.getItem('user_id');\n    const storedUserName = localStorage.getItem('username');\n    const storedToken = localStorage.getItem('token');\n\n    if (storedUserId && storedUserName && storedToken) {\n      setUserId(storedUserId);\n      setUserName(storedUserName);\n      setToken(storedToken);\n      setIsLoggedIn(true);\n    }\n  }, []);\n\n  const handleLoginSuccess = (newUserId, newUserName, newName, newToken) => {\n    setUserId(newUserId);\n    setUserName(newUserName);\n    setToken(newToken);\n    setIsLoggedIn(true);\n  };\n\n  const handleLogout = () => {\n    localStorage.clear();\n    setIsLoggedIn(false);\n    setUserName('');\n    setUserId('');\n    setToken('');\n  };\n\n  const toggleTheme = () => {\n    setTheme((prevTheme) => (prevTheme === 'light' ? 'dark' : 'light'));\n  };\n\n  const setGlobalLoading = (loading) => { // Function to set global loading state\n    setIsLoading(loading);\n  };\n\n  return (\n    <Router>\n      <div>\n        <Header isLoggedIn={isLoggedIn} userName={userName} onLogout={handleLogout} toggleTheme={toggleTheme} currentTheme={theme} />\n        <Routes>\n          <Route path=\"/login\" element={<Login onLogin={handleLoginSuccess} setGlobalLoading={setGlobalLoading} />} />\n          \n          <Route element={<ProtectedRoute isLoggedIn={isLoggedIn} />}>\n            <Route path=\"/welcome\" element={<WelcomePage userName={userName} />} />\n            <Route path=\"/problems\" element={<Problems userId={userId} token={token} setGlobalLoading={setGlobalLoading} />} />\n            <Route path=\"/problems/:problem_id\" element={<ProblemDetail userId={userId} token={token} setGlobalLoading={setGlobalLoading} />} />\n            <Route path=\"/problems/:problemId/submit\" element={<CodeSubmission token={token} setGlobalLoading={setGlobalLoading} />} />\n            <Route path=\"/problems/:problemId/submissions\" element={<ProblemSubmissions token={token} setGlobalLoading={setGlobalLoading} />} />\n            <Route path=\"/profile\" element={<Profile userId={userId} token={token} setGlobalLoading={setGlobalLoading} />} />\n            <Route path=\"/users/:userId/submissions\" element={<UserSubmissions token={token} setGlobalLoading={setGlobalLoading} />} />\n            <Route path=\"/submissions/:submissionId\" element={<SubmissionDetail token={token} setGlobalLoading={setGlobalLoading} />} />\n            <Route path=\"/credits\" element={<Credits />} />\n          </Route>\n\n          <Route path=\"/about\" element={<AboutUs />} />\n          <Route path=\"/contact\" element={<Contact />} />\n          <Route path=\"/privacy\" element={<PrivacyPolicy />} />\n\n          <Route path=\"/\" element={isLoggedIn ? <Navigate to=\"/welcome\" /> : <Navigate to=\"/login\" />} />\n          \n          <Route path=\"*\" element={<NotFound />} />\n        </Routes>\n        <Footer />\n        <LoadingSpinner loading={isLoading} /> {/* Render LoadingSpinner */}\n      </div>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}