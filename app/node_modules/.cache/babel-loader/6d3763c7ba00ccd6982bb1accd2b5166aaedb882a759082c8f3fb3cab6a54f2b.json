{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import'./index.css';// Import the CSS file\nimport'./light.css';import'./dark.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Problems(){const[allProblems,setAllProblems]=useState({});// Store all fetched problems\nconst[problems,setProblems]=useState({});// Problems to display after filtering/searching\nconst[loading,setLoading]=useState(true);const[error,setError]=useState('');const[searchTerm,setSearchTerm]=useState('');const[filterDifficulty,setFilterDifficulty]=useState('');const[filterTag,setFilterTag]=useState('');useEffect(()=>{const fetchProblems=async()=>{const token=localStorage.getItem('token');if(!token){setError('No token found. Please log in.');setLoading(false);return;}try{const response=await fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/problems/\"),{headers:{'Authorization':\"Bearer \".concat(token)}});const data=await response.json();if(response.ok){setAllProblems(data);// Store all problems\nsetProblems(data);// Initially display all problems\n}else{setError(data.error||'Failed to fetch problems');}}catch(err){setError('Network error or server is unreachable');console.error('Fetch problems error:',err);}finally{setLoading(false);}};fetchProblems();},[]);useEffect(()=>{// Apply filters and search whenever allProblems, searchTerm, or filters change\nlet filtered=Object.entries(allProblems);if(searchTerm){filtered=filtered.filter(_ref=>{let[problemId,problemData]=_ref;return problemData.title.toLowerCase().includes(searchTerm.toLowerCase())||problemId.toLowerCase().includes(searchTerm.toLowerCase());});}if(filterDifficulty){filtered=filtered.filter(_ref2=>{let[problemId,problemData]=_ref2;return problemData.difficulty.toLowerCase()===filterDifficulty.toLowerCase();});}if(filterTag){filtered=filtered.filter(_ref3=>{let[problemId,problemData]=_ref3;return problemData.tags.some(tag=>tag.toLowerCase()===filterTag.toLowerCase());});}setProblems(Object.fromEntries(filtered));},[allProblems,searchTerm,filterDifficulty,filterTag]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"problems-loading\",children:\"Loading problems...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"problems-error\",children:[\"Error: \",error]});}// Extract unique difficulties and tags for filter options\nconst difficulties=[...new Set(Object.values(allProblems).map(p=>p.difficulty))];const tags=[...new Set(Object.values(allProblems).flatMap(p=>p.tags))];return/*#__PURE__*/_jsxs(\"div\",{className:\"problems-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Problems\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"problems-filters\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by title or ID...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"problems-filter-input\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterDifficulty,onChange:e=>setFilterDifficulty(e.target.value),className:\"problems-filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Difficulties\"}),difficulties.map(d=>/*#__PURE__*/_jsx(\"option\",{value:d,children:d},d))]}),/*#__PURE__*/_jsxs(\"select\",{value:filterTag,onChange:e=>setFilterTag(e.target.value),className:\"problems-filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Tags\"}),tags.map(t=>/*#__PURE__*/_jsx(\"option\",{value:t,children:t},t))]})]}),Object.keys(problems).length===0?/*#__PURE__*/_jsx(\"p\",{className:\"problems-no-problems\",children:\"No problems available.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"problems-list\",children:Object.entries(problems).map(_ref4=>{let[problemId,problemData]=_ref4;return/*#__PURE__*/_jsxs(\"li\",{className:\"problems-list-item\",children:[/*#__PURE__*/_jsx(Link,{to:\"/problems/\".concat(problemId),className:\"problems-list-item-link\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[problemData.title,\" (\",problemId,\")\"]})}),/*#__PURE__*/_jsx(Link,{to:\"/problems/\".concat(problemId,\"/submissions\"),className:\"problems-view-submissions-link\",children:\"View Submissions\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Difficulty:\"}),\" \",problemData.difficulty]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tags:\"}),\" \",problemData.tags.join(', ')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Authors:\"}),\" \",problemData.authors.join(', ')]})]},problemId);})})]});}export default Problems;","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","Problems","allProblems","setAllProblems","problems","setProblems","loading","setLoading","error","setError","searchTerm","setSearchTerm","filterDifficulty","setFilterDifficulty","filterTag","setFilterTag","fetchProblems","token","localStorage","getItem","response","fetch","concat","process","env","REACT_APP_API_BASE_URL","headers","data","json","ok","err","console","filtered","Object","entries","filter","_ref","problemId","problemData","title","toLowerCase","includes","_ref2","difficulty","_ref3","tags","some","tag","fromEntries","className","children","difficulties","Set","values","map","p","flatMap","type","placeholder","value","onChange","e","target","d","t","keys","length","_ref4","to","join","authors"],"sources":["E:/NEW/frontend-for-annaforces/app/src/components/Problems/index.js"],"sourcesContent":["\n\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport './index.css'; // Import the CSS file\nimport './light.css';\nimport './dark.css';\n\nfunction Problems() {\n  const [allProblems, setAllProblems] = useState({}); // Store all fetched problems\n  const [problems, setProblems] = useState({}); // Problems to display after filtering/searching\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterDifficulty, setFilterDifficulty] = useState('');\n  const [filterTag, setFilterTag] = useState('');\n\n  useEffect(() => {\n    const fetchProblems = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('No token found. Please log in.');\n        setLoading(false);\n        return;\n      }\n\n      try {\n        const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/problems/`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        const data = await response.json();\n\n        if (response.ok) {\n          setAllProblems(data); // Store all problems\n          setProblems(data);    // Initially display all problems\n        } else {\n          setError(data.error || 'Failed to fetch problems');\n        }\n      } catch (err) {\n        setError('Network error or server is unreachable');\n        console.error('Fetch problems error:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProblems();\n  }, []);\n\n  useEffect(() => {\n    // Apply filters and search whenever allProblems, searchTerm, or filters change\n    let filtered = Object.entries(allProblems);\n\n    if (searchTerm) {\n      filtered = filtered.filter(([problemId, problemData]) =>\n        problemData.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        problemId.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    }\n\n    if (filterDifficulty) {\n      filtered = filtered.filter(([problemId, problemData]) =>\n        problemData.difficulty.toLowerCase() === filterDifficulty.toLowerCase()\n      );\n    }\n\n    if (filterTag) {\n      filtered = filtered.filter(([problemId, problemData]) =>\n        problemData.tags.some(tag => tag.toLowerCase() === filterTag.toLowerCase())\n      );\n    }\n\n    setProblems(Object.fromEntries(filtered));\n  }, [allProblems, searchTerm, filterDifficulty, filterTag]);\n\n  if (loading) {\n    return <div className=\"problems-loading\">Loading problems...</div>;\n  }\n\n  if (error) {\n    return <div className=\"problems-error\">Error: {error}</div>;\n  }\n\n  // Extract unique difficulties and tags for filter options\n  const difficulties = [...new Set(Object.values(allProblems).map(p => p.difficulty))];\n  const tags = [...new Set(Object.values(allProblems).flatMap(p => p.tags))];\n\n  return (\n    <div className=\"problems-container\">\n      <h2>Problems</h2>\n      <div className=\"problems-filters\">\n        <input\n          type=\"text\"\n          placeholder=\"Search by title or ID...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"problems-filter-input\"\n        />\n        <select\n          value={filterDifficulty}\n          onChange={(e) => setFilterDifficulty(e.target.value)}\n          className=\"problems-filter-select\"\n        >\n          <option value=\"\">All Difficulties</option>\n          {difficulties.map(d => <option key={d} value={d}>{d}</option>)}\n        </select>\n        <select\n          value={filterTag}\n          onChange={(e) => setFilterTag(e.target.value)}\n          className=\"problems-filter-select\"\n        >\n          <option value=\"\">All Tags</option>\n          {tags.map(t => <option key={t} value={t}>{t}</option>)}\n        </select>\n      </div>\n      {Object.keys(problems).length === 0 ? (\n        <p className=\"problems-no-problems\">No problems available.</p>\n      ) : (\n        <ul className=\"problems-list\">\n          {Object.entries(problems).map(([problemId, problemData]) => (\n            <li key={problemId} className=\"problems-list-item\">\n              <Link to={`/problems/${problemId}`} className=\"problems-list-item-link\">\n                <h3>{problemData.title} ({problemId})</h3>\n              </Link>\n              <Link to={`/problems/${problemId}/submissions`} className=\"problems-view-submissions-link\">\n                View Submissions\n              </Link>\n              <p><strong>Difficulty:</strong> {problemData.difficulty}</p>\n              <p><strong>Tags:</strong> {problemData.tags.join(', ')}</p>\n              <p><strong>Authors:</strong> {problemData.authors.join(', ')}</p>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\nexport default Problems;\n\n\n"],"mappings":"AAGA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,aAAa,CAAE;AACtB,MAAO,aAAa,CACpB,MAAO,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpB,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGT,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAE;AACpD,KAAM,CAACU,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAE;AAC9C,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACgB,UAAU,CAAEC,aAAa,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACkB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACoB,SAAS,CAAEC,YAAY,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAE9CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACVR,QAAQ,CAAC,gCAAgC,CAAC,CAC1CF,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,GAAI,CACF,KAAM,CAAAa,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,sBAAsB,mBAAkB,CAClFC,OAAO,CAAE,CACP,eAAe,WAAAJ,MAAA,CAAYL,KAAK,CAClC,CACF,CAAC,CAAC,CAEF,KAAM,CAAAU,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC,GAAIR,QAAQ,CAACS,EAAE,CAAE,CACf1B,cAAc,CAACwB,IAAI,CAAC,CAAE;AACtBtB,WAAW,CAACsB,IAAI,CAAC,CAAK;AACxB,CAAC,IAAM,CACLlB,QAAQ,CAACkB,IAAI,CAACnB,KAAK,EAAI,0BAA0B,CAAC,CACpD,CACF,CAAE,MAAOsB,GAAG,CAAE,CACZrB,QAAQ,CAAC,wCAAwC,CAAC,CAClDsB,OAAO,CAACvB,KAAK,CAAC,uBAAuB,CAAEsB,GAAG,CAAC,CAC7C,CAAC,OAAS,CACRvB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDS,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAENrB,SAAS,CAAC,IAAM,CACd;AACA,GAAI,CAAAqC,QAAQ,CAAGC,MAAM,CAACC,OAAO,CAAChC,WAAW,CAAC,CAE1C,GAAIQ,UAAU,CAAE,CACdsB,QAAQ,CAAGA,QAAQ,CAACG,MAAM,CAACC,IAAA,MAAC,CAACC,SAAS,CAAEC,WAAW,CAAC,CAAAF,IAAA,OAClD,CAAAE,WAAW,CAACC,KAAK,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC/B,UAAU,CAAC8B,WAAW,CAAC,CAAC,CAAC,EAClEH,SAAS,CAACG,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC/B,UAAU,CAAC8B,WAAW,CAAC,CAAC,CAAC,EAC5D,CAAC,CACH,CAEA,GAAI5B,gBAAgB,CAAE,CACpBoB,QAAQ,CAAGA,QAAQ,CAACG,MAAM,CAACO,KAAA,MAAC,CAACL,SAAS,CAAEC,WAAW,CAAC,CAAAI,KAAA,OAClD,CAAAJ,WAAW,CAACK,UAAU,CAACH,WAAW,CAAC,CAAC,GAAK5B,gBAAgB,CAAC4B,WAAW,CAAC,CAAC,EACzE,CAAC,CACH,CAEA,GAAI1B,SAAS,CAAE,CACbkB,QAAQ,CAAGA,QAAQ,CAACG,MAAM,CAACS,KAAA,MAAC,CAACP,SAAS,CAAEC,WAAW,CAAC,CAAAM,KAAA,OAClD,CAAAN,WAAW,CAACO,IAAI,CAACC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACP,WAAW,CAAC,CAAC,GAAK1B,SAAS,CAAC0B,WAAW,CAAC,CAAC,CAAC,EAC7E,CAAC,CACH,CAEAnC,WAAW,CAAC4B,MAAM,CAACe,WAAW,CAAChB,QAAQ,CAAC,CAAC,CAC3C,CAAC,CAAE,CAAC9B,WAAW,CAAEQ,UAAU,CAAEE,gBAAgB,CAAEE,SAAS,CAAC,CAAC,CAE1D,GAAIR,OAAO,CAAE,CACX,mBAAOR,IAAA,QAAKmD,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,qBAAmB,CAAK,CAAC,CACpE,CAEA,GAAI1C,KAAK,CAAE,CACT,mBAAOR,KAAA,QAAKiD,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAAC,SAAO,CAAC1C,KAAK,EAAM,CAAC,CAC7D,CAEA;AACA,KAAM,CAAA2C,YAAY,CAAG,CAAC,GAAG,GAAI,CAAAC,GAAG,CAACnB,MAAM,CAACoB,MAAM,CAACnD,WAAW,CAAC,CAACoD,GAAG,CAACC,CAAC,EAAIA,CAAC,CAACZ,UAAU,CAAC,CAAC,CAAC,CACpF,KAAM,CAAAE,IAAI,CAAG,CAAC,GAAG,GAAI,CAAAO,GAAG,CAACnB,MAAM,CAACoB,MAAM,CAACnD,WAAW,CAAC,CAACsD,OAAO,CAACD,CAAC,EAAIA,CAAC,CAACV,IAAI,CAAC,CAAC,CAAC,CAE1E,mBACE7C,KAAA,QAAKiD,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCpD,IAAA,OAAAoD,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBlD,KAAA,QAAKiD,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BpD,IAAA,UACE2D,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,0BAA0B,CACtCC,KAAK,CAAEjD,UAAW,CAClBkD,QAAQ,CAAGC,CAAC,EAAKlD,aAAa,CAACkD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC/CV,SAAS,CAAC,uBAAuB,CAClC,CAAC,cACFjD,KAAA,WACE2D,KAAK,CAAE/C,gBAAiB,CACxBgD,QAAQ,CAAGC,CAAC,EAAKhD,mBAAmB,CAACgD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACrDV,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eAElCpD,IAAA,WAAQ6D,KAAK,CAAC,EAAE,CAAAT,QAAA,CAAC,kBAAgB,CAAQ,CAAC,CACzCC,YAAY,CAACG,GAAG,CAACS,CAAC,eAAIjE,IAAA,WAAgB6D,KAAK,CAAEI,CAAE,CAAAb,QAAA,CAAEa,CAAC,EAAfA,CAAwB,CAAC,CAAC,EACxD,CAAC,cACT/D,KAAA,WACE2D,KAAK,CAAE7C,SAAU,CACjB8C,QAAQ,CAAGC,CAAC,EAAK9C,YAAY,CAAC8C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC9CV,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eAElCpD,IAAA,WAAQ6D,KAAK,CAAC,EAAE,CAAAT,QAAA,CAAC,UAAQ,CAAQ,CAAC,CACjCL,IAAI,CAACS,GAAG,CAACU,CAAC,eAAIlE,IAAA,WAAgB6D,KAAK,CAAEK,CAAE,CAAAd,QAAA,CAAEc,CAAC,EAAfA,CAAwB,CAAC,CAAC,EAChD,CAAC,EACN,CAAC,CACL/B,MAAM,CAACgC,IAAI,CAAC7D,QAAQ,CAAC,CAAC8D,MAAM,GAAK,CAAC,cACjCpE,IAAA,MAAGmD,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,wBAAsB,CAAG,CAAC,cAE9DpD,IAAA,OAAImD,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC1BjB,MAAM,CAACC,OAAO,CAAC9B,QAAQ,CAAC,CAACkD,GAAG,CAACa,KAAA,MAAC,CAAC9B,SAAS,CAAEC,WAAW,CAAC,CAAA6B,KAAA,oBACrDnE,KAAA,OAAoBiD,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eAChDpD,IAAA,CAACF,IAAI,EAACwE,EAAE,cAAA9C,MAAA,CAAee,SAAS,CAAG,CAACY,SAAS,CAAC,yBAAyB,CAAAC,QAAA,cACrElD,KAAA,OAAAkD,QAAA,EAAKZ,WAAW,CAACC,KAAK,CAAC,IAAE,CAACF,SAAS,CAAC,GAAC,EAAI,CAAC,CACtC,CAAC,cACPvC,IAAA,CAACF,IAAI,EAACwE,EAAE,cAAA9C,MAAA,CAAee,SAAS,gBAAe,CAACY,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,kBAE3F,CAAM,CAAC,cACPlD,KAAA,MAAAkD,QAAA,eAAGpD,IAAA,WAAAoD,QAAA,CAAQ,aAAW,CAAQ,CAAC,IAAC,CAACZ,WAAW,CAACK,UAAU,EAAI,CAAC,cAC5D3C,KAAA,MAAAkD,QAAA,eAAGpD,IAAA,WAAAoD,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,CAACZ,WAAW,CAACO,IAAI,CAACwB,IAAI,CAAC,IAAI,CAAC,EAAI,CAAC,cAC3DrE,KAAA,MAAAkD,QAAA,eAAGpD,IAAA,WAAAoD,QAAA,CAAQ,UAAQ,CAAQ,CAAC,IAAC,CAACZ,WAAW,CAACgC,OAAO,CAACD,IAAI,CAAC,IAAI,CAAC,EAAI,CAAC,GAT1DhC,SAUL,CAAC,EACN,CAAC,CACA,CACL,EACE,CAAC,CAEV,CAEA,cAAe,CAAApC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}