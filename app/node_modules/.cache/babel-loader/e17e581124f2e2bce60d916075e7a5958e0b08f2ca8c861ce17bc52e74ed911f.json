{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'./index.css';// Import the CSS file\nimport'./light.css';import'./dark.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){let{onLogin,setIsLoading}=_ref;// Add setIsLoading prop\nconst[userId,setUserId]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();setError('');setIsLoading(true);// Use global loading\ntry{const response=await fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:userId,password:password})});const data=await response.json();if(response.ok){localStorage.setItem('user_id',data.user_id);localStorage.setItem('username',data.username);localStorage.setItem('name',data.name);localStorage.setItem('token',data.token);onLogin(data.user_id,data.username,data.name,data.token);navigate('/welcome');}else{setError(data.error||'Login failed');}}catch(err){setError('Network error or server is unreachable');console.error('Login error:',err);}finally{setIsLoading(false);// Use global loading\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"login-title\",children:\"Login \\uD83D\\uDD11\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"userId\",className:\"login-label\",children:\"User ID:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"userId\",value:userId,onChange:e=>setUserId(e.target.value),className:\"login-input\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"login-label\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"login-input\",required:true})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"login-button\",disabled:false,children:[\" \",\"Login \\u25B6\\uFE0F\"]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"login-error\",children:error})]})]});}export default Login;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","setIsLoading","userId","setUserId","password","setPassword","error","setError","navigate","handleSubmit","e","preventDefault","response","fetch","concat","process","env","REACT_APP_API_BASE_URL","method","headers","body","JSON","stringify","user_id","data","json","ok","localStorage","setItem","username","name","token","err","console","className","children","onSubmit","htmlFor","type","id","value","onChange","target","required","disabled"],"sources":["E:/NEW/frontend-for-annaforces/app/src/components/Login/index.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './index.css'; // Import the CSS file\nimport './light.css';\nimport './dark.css';\n\nfunction Login({ onLogin, setIsLoading }) { // Add setIsLoading prop\n  const [userId, setUserId] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setIsLoading(true); // Use global loading\n\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ user_id: userId, password: password }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        localStorage.setItem('user_id', data.user_id);\n        localStorage.setItem('username', data.username);\n        localStorage.setItem('name', data.name);\n        localStorage.setItem('token', data.token);\n\n        onLogin(data.user_id, data.username, data.name, data.token);\n        navigate('/welcome');\n      } else {\n        setError(data.error || 'Login failed');\n      }\n    } catch (err) {\n      setError('Network error or server is unreachable');\n      console.error('Login error:', err);\n    } finally {\n      setIsLoading(false); // Use global loading\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <h2 className=\"login-title\">Login üîë</h2>\n      <form onSubmit={handleSubmit}>\n        <div className=\"login-form-group\">\n          <label htmlFor=\"userId\" className=\"login-label\">User ID:</label>\n          <input\n            type=\"text\"\n            id=\"userId\"\n            value={userId}\n            onChange={(e) => setUserId(e.target.value)}\n            className=\"login-input\"\n            required\n          />\n        </div>\n        <div className=\"login-form-group\">\n          <label htmlFor=\"password\" className=\"login-label\">Password:</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"login-input\"\n            required\n          />\n        </div>\n        <button type=\"submit\" className=\"login-button\" disabled={false}> {/* Remove disabled based on local isLoading */}\n          Login ‚ñ∂Ô∏è\n        </button>\n        {error && <p className=\"login-error\">{error}</p>}\n      </form>\n    </div>\n  );\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}