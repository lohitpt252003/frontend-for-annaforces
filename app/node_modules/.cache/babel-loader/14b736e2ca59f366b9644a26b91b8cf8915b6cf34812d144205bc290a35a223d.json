{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import'./index.css';// Import the CSS file\nimport'./light.css';import'./dark.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function Problems(_ref){let{setIsLoading}=_ref;// Accept setIsLoading prop\nconst[allProblems,setAllProblems]=useState({});// Store all fetched problems\nconst[problems,setProblems]=useState({});// Problems to display after filtering/searching\nconst[error,setError]=useState('');const[searchTerm,setSearchTerm]=useState('');const[filterDifficulty,setFilterDifficulty]=useState('');const[filterTag,setFilterTag]=useState('');useEffect(()=>{const fetchProblems=async()=>{const token=localStorage.getItem('token');if(!token){setError('No token found. Please log in.');return;}setIsLoading(true);// Use global loading\ntry{const response=await fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/problems/\"),{headers:{'Authorization':\"Bearer \".concat(token)}});const data=await response.json();if(response.ok){setAllProblems(data);// Store all problems\nsetProblems(data);// Initially display all problems\n}else{setError(data.error||'Failed to fetch problems');}}catch(err){setError('Network error or server is unreachable');console.error('Fetch problems error:',err);}finally{setIsLoading(false);// Use global loading\n}};fetchProblems();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{// Apply filters and search whenever allProblems, searchTerm, or filters change\nlet filtered=Object.entries(allProblems);if(searchTerm){filtered=filtered.filter(_ref2=>{let[problemId,problemData]=_ref2;return problemData.title.toLowerCase().includes(searchTerm.toLowerCase())||problemId.toLowerCase().includes(searchTerm.toLowerCase());});}if(filterDifficulty){filtered=filtered.filter(_ref3=>{let[problemId,problemData]=_ref3;return problemData.difficulty.toLowerCase()===filterDifficulty.toLowerCase();});}if(filterTag){filtered=filtered.filter(_ref4=>{let[problemId,problemData]=_ref4;return problemData.tags.some(tag=>tag.toLowerCase()===filterTag.toLowerCase());});}setProblems(Object.fromEntries(filtered));},[allProblems,searchTerm,filterDifficulty,filterTag]);if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"problems-error\",children:[\"Error: \",error]});}// Extract unique difficulties and tags for filter options\nconst difficulties=[...new Set(Object.values(allProblems).map(p=>p.difficulty))];const tags=[...new Set(Object.values(allProblems).flatMap(p=>p.tags))];return/*#__PURE__*/_jsxs(\"div\",{className:\"problems-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Problems \\uD83D\\uDCCB\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"problems-filters\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by title or ID... \\uD83D\\uDD0D\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"problems-filter-input\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterDifficulty,onChange:e=>setFilterDifficulty(e.target.value),className:\"problems-filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Difficulties \\uD83D\\uDCC8\"}),difficulties.map(d=>/*#__PURE__*/_jsx(\"option\",{value:d,children:d},d))]}),/*#__PURE__*/_jsxs(\"select\",{value:filterTag,onChange:e=>setFilterTag(e.target.value),className:\"problems-filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Tags \\uD83C\\uDFF7\\uFE0F\"}),tags.map(t=>/*#__PURE__*/_jsx(\"option\",{value:t,children:t},t))]})]}),Object.keys(problems).length===0?/*#__PURE__*/_jsx(\"p\",{className:\"problems-no-problems\",children:\"No problems available.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"problems-list\",children:Object.entries(problems).map(_ref5=>{let[problemId,problemData]=_ref5;return/*#__PURE__*/_jsxs(\"li\",{className:\"problems-list-item\",children:[/*#__PURE__*/_jsx(Link,{to:\"/problems/\".concat(problemId),className:\"problems-list-item-link\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[problemData.title,\" (\",problemId,\")\"]})}),/*#__PURE__*/_jsx(Link,{to:\"/problems/\".concat(problemId,\"/submissions\"),className:\"problems-view-submissions-link\",children:\"View Submissions\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Difficulty:\"}),\" \\u2B50 \",problemData.difficulty]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tags:\"}),\" \\uD83C\\uDFF7\\uFE0F \",problemData.tags.join(', ')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Authors:\"}),\" \\u270D\\uFE0F \",problemData.authors.join(', ')]})]},problemId);})})]});}export default Problems;","map":{"version":3,"names":["React","useState","useEffect","Link","jsxs","_jsxs","jsx","_jsx","Problems","_ref","setIsLoading","allProblems","setAllProblems","problems","setProblems","error","setError","searchTerm","setSearchTerm","filterDifficulty","setFilterDifficulty","filterTag","setFilterTag","fetchProblems","token","localStorage","getItem","response","fetch","concat","process","env","REACT_APP_API_BASE_URL","headers","data","json","ok","err","console","filtered","Object","entries","filter","_ref2","problemId","problemData","title","toLowerCase","includes","_ref3","difficulty","_ref4","tags","some","tag","fromEntries","className","children","difficulties","Set","values","map","p","flatMap","type","placeholder","value","onChange","e","target","d","t","keys","length","_ref5","to","join","authors"],"sources":["E:/NEW/frontend-for-annaforces/app/src/components/Problems/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport './index.css'; // Import the CSS file\nimport './light.css';\nimport './dark.css';\n\nfunction Problems({ setIsLoading }) { // Accept setIsLoading prop\n  const [allProblems, setAllProblems] = useState({}); // Store all fetched problems\n  const [problems, setProblems] = useState({}); // Problems to display after filtering/searching\n  const [error, setError] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterDifficulty, setFilterDifficulty] = useState('');\n  const [filterTag, setFilterTag] = useState('');\n\n  useEffect(() => {\n    const fetchProblems = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('No token found. Please log in.');\n        return;\n      }\n\n      setIsLoading(true); // Use global loading\n\n      try {\n        const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/problems/`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        const data = await response.json();\n\n        if (response.ok) {\n          setAllProblems(data); // Store all problems\n          setProblems(data);    // Initially display all problems\n        } else {\n          setError(data.error || 'Failed to fetch problems');\n        }\n      } catch (err) {\n        setError('Network error or server is unreachable');\n        console.error('Fetch problems error:', err);\n      } finally {\n        setIsLoading(false); // Use global loading\n      }\n    };\n\n    fetchProblems();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    // Apply filters and search whenever allProblems, searchTerm, or filters change\n    let filtered = Object.entries(allProblems);\n\n    if (searchTerm) {\n      filtered = filtered.filter(([problemId, problemData]) =>\n        problemData.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        problemId.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    }\n\n    if (filterDifficulty) {\n      filtered = filtered.filter(([problemId, problemData]) =>\n        problemData.difficulty.toLowerCase() === filterDifficulty.toLowerCase()\n      );\n    }\n\n    if (filterTag) {\n      filtered = filtered.filter(([problemId, problemData]) =>\n        problemData.tags.some(tag => tag.toLowerCase() === filterTag.toLowerCase())\n      );\n    }\n\n    setProblems(Object.fromEntries(filtered));\n  }, [allProblems, searchTerm, filterDifficulty, filterTag]);\n\n  if (error) {\n    return <div className=\"problems-error\">Error: {error}</div>;\n  }\n\n  // Extract unique difficulties and tags for filter options\n  const difficulties = [...new Set(Object.values(allProblems).map(p => p.difficulty))];\n  const tags = [...new Set(Object.values(allProblems).flatMap(p => p.tags))];\n\n  return (\n    <div className=\"problems-container\">\n      <h2>Problems 📋</h2>\n      <div className=\"problems-filters\">\n        <input\n          type=\"text\"\n          placeholder=\"Search by title or ID... 🔍\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"problems-filter-input\"\n        />\n        <select\n          value={filterDifficulty}\n          onChange={(e) => setFilterDifficulty(e.target.value)}\n          className=\"problems-filter-select\"\n        >\n          <option value=\"\">All Difficulties 📈</option>\n          {difficulties.map(d => <option key={d} value={d}>{d}</option>)}\n        </select>\n        <select\n          value={filterTag}\n          onChange={(e) => setFilterTag(e.target.value)}\n          className=\"problems-filter-select\"\n        >\n          <option value=\"\">All Tags 🏷️</option>\n          {tags.map(t => <option key={t} value={t}>{t}</option>)}\n        </select>\n      </div>\n      {Object.keys(problems).length === 0 ? (\n        <p className=\"problems-no-problems\">No problems available.</p>\n      ) : (\n        <ul className=\"problems-list\">\n          {Object.entries(problems).map(([problemId, problemData]) => (\n            <li key={problemId} className=\"problems-list-item\">\n              <Link to={`/problems/${problemId}`} className=\"problems-list-item-link\">\n                <h3>{problemData.title} ({problemId})</h3>\n              </Link>\n              <Link to={`/problems/${problemId}/submissions`} className=\"problems-view-submissions-link\">\n                View Submissions\n              </Link>\n              <p><strong>Difficulty:</strong> ⭐ {problemData.difficulty}</p>\n              <p><strong>Tags:</strong> 🏷️ {problemData.tags.join(', ')}</p>\n              <p><strong>Authors:</strong> ✍️ {problemData.authors.join(', ')}</p>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\nexport default Problems;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}