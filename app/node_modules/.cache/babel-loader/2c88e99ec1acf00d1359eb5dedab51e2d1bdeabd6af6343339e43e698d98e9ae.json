{"ast":null,"code":"import React,{useState}from'react';import{useParams,useNavigate}from'react-router-dom';import'./index.css';// Import the CSS file\nimport'./light.css';import'./dark.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function CodeSubmission(_ref){let{token,setGlobalLoading}=_ref;// Accept setGlobalLoading prop\nconst{problemId}=useParams();const navigate=useNavigate();const[code,setCode]=useState('');const[language,setLanguage]=useState('python');// Default language\nconst[message,setMessage]=useState('');const[error,setError]=useState('');const handleSubmit=async e=>{e.preventDefault();setMessage('');setError('');setGlobalLoading(true);// Use global loading\ntry{const response=await fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/problems/\").concat(problemId,\"/submit\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({code,language})});const data=await response.json();if(!response.ok){throw new Error(data.error||'Submission failed');}setMessage(data.message||'Submission successful!');// Optionally navigate to submission details or user submissions page\nif(data.submission_id){navigate(\"/submissions/\".concat(data.submission_id));}}catch(err){setError(err.message);}finally{setGlobalLoading(false);// Use global loading\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"code-submission-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Submit Code for Problem: \",problemId]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"code-submission-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"code-submission-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"language\",className:\"code-submission-label\",children:\"Language:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"language\",value:language,onChange:e=>setLanguage(e.target.value),className:\"code-submission-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"python\",children:\"Python\"}),/*#__PURE__*/_jsx(\"option\",{value:\"c\",children:\"C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cpp\",children:\"C++\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"code-submission-form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"code\",className:\"code-submission-label\",children:\"Code:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"code\",value:code,onChange:e=>setCode(e.target.value),rows:\"20\",cols:\"80\",placeholder:\"Write your code here...\",className:\"code-submission-textarea\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"code-submission-button\",children:\"Submit\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"code-submission-message success\",children:message}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"code-submission-message error\",children:error})]});}export default CodeSubmission;","map":{"version":3,"names":["React","useState","useParams","useNavigate","jsxs","_jsxs","jsx","_jsx","CodeSubmission","_ref","token","setGlobalLoading","problemId","navigate","code","setCode","language","setLanguage","message","setMessage","error","setError","handleSubmit","e","preventDefault","response","fetch","concat","process","env","REACT_APP_API_BASE_URL","method","headers","body","JSON","stringify","data","json","ok","Error","submission_id","err","className","children","onSubmit","htmlFor","id","value","onChange","target","rows","cols","placeholder","type"],"sources":["E:/NEW/frontend-for-annaforces/app/src/components/CodeSubmission/index.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport './index.css'; // Import the CSS file\nimport './light.css';\nimport './dark.css';\n\nfunction CodeSubmission({ token, setGlobalLoading }) { // Accept setGlobalLoading prop\n  const { problemId } = useParams();\n  const navigate = useNavigate();\n  const [code, setCode] = useState('');\n  const [language, setLanguage] = useState('python'); // Default language\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setMessage('');\n    setError('');\n    setGlobalLoading(true); // Use global loading\n\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/problems/${problemId}/submit`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ code, language })\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Submission failed');\n      }\n\n      setMessage(data.message || 'Submission successful!');\n      // Optionally navigate to submission details or user submissions page\n      if (data.submission_id) {\n        navigate(`/submissions/${data.submission_id}`);\n      }\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setGlobalLoading(false); // Use global loading\n    }\n  };\n\n  return (\n    <div className=\"code-submission-container\">\n      <h2>Submit Code for Problem: {problemId}</h2>\n      <form onSubmit={handleSubmit} className=\"code-submission-form\">\n        <div className=\"code-submission-form-group\">\n          <label htmlFor=\"language\" className=\"code-submission-label\">Language:</label>\n          <select id=\"language\" value={language} onChange={(e) => setLanguage(e.target.value)} className=\"code-submission-select\">\n            <option value=\"python\">Python</option>\n            <option value=\"c\">C</option>\n            <option value=\"cpp\">C++</option>\n          </select>\n        </div>\n        <div className=\"code-submission-form-group\">\n          <label htmlFor=\"code\" className=\"code-submission-label\">Code:</label>\n          <textarea\n            id=\"code\"\n            value={code}\n            onChange={(e) => setCode(e.target.value)}\n            rows=\"20\"\n            cols=\"80\"\n            placeholder=\"Write your code here...\"\n            className=\"code-submission-textarea\"\n          ></textarea>\n        </div>\n        <button type=\"submit\" className=\"code-submission-button\">Submit</button>\n      </form>\n\n      {message && <p className=\"code-submission-message success\">{message}</p>}\n      {error && <p className=\"code-submission-message error\">{error}</p>}\n    </div>\n  );\n}\n\nexport default CodeSubmission;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}